# CLAUDE.md

Ð­Ñ‚Ð¾Ñ‚ Ñ„Ð°Ð¹Ð» Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð´Ð»Ñ Claude Code (claude.ai/code) Ð¿Ñ€Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ ÐºÐ¾Ð´Ð¾Ð¼ Ð² Ð´Ð°Ð½Ð½Ð¾Ð¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸.

## ÐžÐ±Ð·Ð¾Ñ€ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

**ÐÐµÑ‚Ð¸Ð¿Ð¸Ñ‡Ð½Ð°Ñ ÐœÐ°Ñ„Ð¸Ñ** - ÑÑ‚Ð¾ Ð¾Ð½Ð»Ð°Ð¹Ð½ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° Ð´Ð»Ñ Ð¸Ð³Ñ€Ñ‹ Ð² Werewolf (ÐœÐ°Ñ„Ð¸Ñ/ÐžÐ±Ð¾Ñ€Ð¾Ñ‚Ð½Ð¸) Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑÐ¼Ð¸ Ñ‡Ð°Ñ‚Ð° Ð¸ Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸.

### ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°:
- **Frontend**: Nuxt 4 + Vue 3 (SPA Ñ€ÐµÐ¶Ð¸Ð¼)
- **Backend**: Node.js + Express + Socket.IO
- **ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°**: Client-Server Ñ WebSocket ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸ÑÐ¼Ð¸
- **Ð¡Ñ‚ÐµÐ¹Ñ‚ Ð¼ÐµÐ½ÐµÐ´Ð¶Ð¼ÐµÐ½Ñ‚**: Vue Composition API + Reactive state

## âš ï¸ Ð¢Ð Ð•Ð‘Ð£Ð•Ð¢ Ð’ÐÐ˜ÐœÐÐÐ˜Ð¯

### ChatCommandProcessor Ð½Ðµ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½
- `server/services/ChatCommandProcessor.js` Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½ (790 ÑÑ‚Ñ€Ð¾Ðº)
- ÐÐ• Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² `server/socket-server.js:299` Ð² `handleSendMessage`
- ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ `/w`, `/whisper`, `/wg`, `/help` Ð¸Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÑŽÑ‚ÑÑ

### Dead Code
- `server/config/roles.js` Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ (ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ)
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ `shared/rolesRegistry.js`

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

```bash
npm run dev          # Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° (ÑÐµÑ€Ð²ÐµÑ€ + ÐºÐ»Ð¸ÐµÐ½Ñ‚)
npm run dev:server   # Ð¢Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾ÐºÐµÑ‚ ÑÐµÑ€Ð²ÐµÑ€
npm run dev:client   # Ð¢Ð¾Ð»ÑŒÐºÐ¾ Nuxt ÐºÐ»Ð¸ÐµÐ½Ñ‚
npm run build        # Ð¡Ð±Ð¾Ñ€ÐºÐ°
npm run start        # ÐŸÑ€Ð¾Ð´Ð°ÐºÑˆÐ½
npm run lint         # Ð›Ð¸Ð½Ñ‚Ð¸Ð½Ð³
npm run test         # Ð¢ÐµÑÑ‚Ñ‹
```

## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹

### Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹

```
untypical-mafia/
â”œâ”€â”€ app/                         # Nuxt 4 ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ°Ñ Ñ‡Ð°ÑÑ‚ÑŒ
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ css/
â”‚   â”‚       â””â”€â”€ main.css
â”‚   â”œâ”€â”€ components/              # Vue ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ AdminPanel.vue       # ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
â”‚   â”‚   â”œâ”€â”€ ColorPalette.vue     # Ð¦Ð²ÐµÑ‚Ð¾Ð²Ð°Ñ Ð¿Ð°Ð»Ð¸Ñ‚Ñ€Ð°
â”‚   â”‚   â”œâ”€â”€ ConnectionStatus.vue # Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ
â”‚   â”‚   â”œâ”€â”€ DayPhase.vue         # Ð”Ð½ÐµÐ²Ð½Ð°Ñ Ñ„Ð°Ð·Ð°
â”‚   â”‚   â”œâ”€â”€ GameChat.vue         # ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ‡Ð°Ñ‚Ð°
â”‚   â”‚   â”œâ”€â”€ GameEndPhase.vue     # Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¸Ð³Ñ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ GameSetup.vue        # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¸Ð³Ñ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ IntroductionPhase.vue # Ð¤Ð°Ð·Ð° Ð·Ð½Ð°ÐºÐ¾Ð¼ÑÑ‚Ð²Ð°
â”‚   â”‚   â”œâ”€â”€ MicrophonePermissionModal.vue # Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ Ð¼Ð¸ÐºÑ€Ð¾Ñ„Ð¾Ð½Ð°
â”‚   â”‚   â”œâ”€â”€ MicrophoneSettings.vue # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¼Ð¸ÐºÑ€Ð¾Ñ„Ð¾Ð½Ð°
â”‚   â”‚   â”œâ”€â”€ NightPhase.vue       # ÐÐ¾Ñ‡Ð½Ð°Ñ Ñ„Ð°Ð·Ð°
â”‚   â”‚   â”œâ”€â”€ PlayerItem.vue       # ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° Ð¸Ð³Ñ€Ð¾ÐºÐ°
â”‚   â”‚   â”œâ”€â”€ PlayersList.vue      # Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
â”‚   â”‚   â”œâ”€â”€ RulesModal.vue       # ÐœÐ¾Ð´Ð°Ð» Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°Ð¼Ð¸
â”‚   â”‚   â”œâ”€â”€ SettingsModal.vue    # ÐœÐ¾Ð´Ð°Ð» Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº
â”‚   â”‚   â”œâ”€â”€ UsernameModal.vue    # ÐœÐ¾Ð´Ð°Ð» Ð²Ð²Ð¾Ð´Ð° Ð¸Ð¼ÐµÐ½Ð¸
â”‚   â”‚   â”œâ”€â”€ VoiceDebugger.vue    # ÐžÑ‚Ð»Ð°Ð´Ñ‡Ð¸Ðº Ð³Ð¾Ð»Ð¾ÑÐ°
â”‚   â”‚   â”œâ”€â”€ VotingPhase.vue      # Ð¤Ð°Ð·Ð° Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ð½Ð¸Ñ
â”‚   â”‚   â”œâ”€â”€ header.vue           # Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº
â”‚   â”‚   â””â”€â”€ role-card.vue        # ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° Ñ€Ð¾Ð»Ð¸
â”‚   â”œâ”€â”€ composables/             # Vue Composition API
â”‚   â”‚   â”œâ”€â”€ useGame.js           # ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¸Ð³Ñ€Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°
â”‚   â”‚   â”œâ”€â”€ useSocket.js         # Socket.IO ÐºÐ»Ð¸ÐµÐ½Ñ‚
â”‚   â”‚   â”œâ”€â”€ useSound.js          # Ð—Ð²ÑƒÐºÐ¾Ð²Ñ‹Ðµ ÑÑ„Ñ„ÐµÐºÑ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ useUser.js           # ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ
â”‚   â”‚   â””â”€â”€ useVoiceActivity.js  # Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ñ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ
â”‚   â”œâ”€â”€ pages/                   # Ð Ð¾ÑƒÑ‚Ð¸Ð½Ð³ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†
â”‚   â”‚   â”œâ”€â”€ game/
â”‚   â”‚   â”‚   â””â”€â”€ [id].vue         # Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹
â”‚   â”‚   â””â”€â”€ index.vue            # Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°
â”‚   â””â”€â”€ plugins/
â”‚       â””â”€â”€ socket.client.js     # ÐšÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ¸Ð¹ ÑÐ¾ÐºÐµÑ‚
â”œâ”€â”€ server/                      # Ð¡ÐµÑ€Ð²ÐµÑ€Ð½Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ
â”‚   â”œâ”€â”€ engine/                  # Ð˜Ð³Ñ€Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°
â”‚   â”‚   â”œâ”€â”€ GameEngine.js
â”‚   â”‚   â”œâ”€â”€ PhaseManager.js
â”‚   â”‚   â””â”€â”€ WinConditions.js
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ GameRoom.js          # ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹
â”‚   â”œâ”€â”€ roles/                   # Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ñ€Ð¾Ð»ÐµÐ¹
â”‚   â”‚   â”œâ”€â”€ BaseRole.js
â”‚   â”‚   â”œâ”€â”€ abilities/
â”‚   â”‚   â”‚   â””â”€â”€ RoleAbilities.js
â”‚   â”‚   â”œâ”€â”€ rolesList.js
â”‚   â”‚   â”œâ”€â”€ special/
â”‚   â”‚   â”‚   â””â”€â”€ DoppelgangerRole.js
â”‚   â”‚   â”œâ”€â”€ tanner/
â”‚   â”‚   â”‚   â””â”€â”€ TannerRole.js
â”‚   â”‚   â”œâ”€â”€ village/
â”‚   â”‚   â”‚   â”œâ”€â”€ DrunkRole.js
â”‚   â”‚   â”‚   â”œâ”€â”€ RobberRole.js
â”‚   â”‚   â”‚   â”œâ”€â”€ SeerRole.js
â”‚   â”‚   â”‚   â”œâ”€â”€ TroublemakerRole.js
â”‚   â”‚   â”‚   â””â”€â”€ VillagerRole.js
â”‚   â”‚   â””â”€â”€ werewolf/
â”‚   â”‚       â”œâ”€â”€ MysticWolfRole.js
â”‚   â”‚       â””â”€â”€ WerewolfRole.js
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ ChatCommandProcessor.js # ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ¾Ð¼Ð°Ð½Ð´ Ñ‡Ð°Ñ‚Ð°
â”‚   â”œâ”€â”€ utils/                   # Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ EventBus.js
â”‚   â”‚   â”œâ”€â”€ constants.js
â”‚   â”‚   â””â”€â”€ gameHelpers.js
â”‚   â””â”€â”€ socket-server.js         # Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÑÐ¾ÐºÐµÑ‚ ÑÐµÑ€Ð²ÐµÑ€
â”œâ”€â”€ public/                      # Ð¡Ñ‚Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
â”‚   â”œâ”€â”€ icons/                   # UI Ð¸ÐºÐ¾Ð½ÐºÐ¸ (20 Ñ„Ð°Ð¹Ð»Ð¾Ð²)
â”‚   â”‚   â”œâ”€â”€ Day.png
â”‚   â”‚   â”œâ”€â”€ night.png
â”‚   â”‚   â”œâ”€â”€ kill.png
â”‚   â”‚   â”œâ”€â”€ revive.png
â”‚   â”‚   â”œâ”€â”€ vote.png
â”‚   â”‚   â”œâ”€â”€ shield.png
â”‚   â”‚   â”œâ”€â”€ microphone.png
â”‚   â”‚   â”œâ”€â”€ mute.png
â”‚   â”‚   â””â”€â”€ ... (Ð´Ñ€ÑƒÐ³Ð¸Ðµ)
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ logo.png
â”‚   â”œâ”€â”€ roles/                   # Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ñ€Ð¾Ð»ÐµÐ¹
â”‚   â”‚   â”œâ”€â”€ compressed/          # WebP Ð²ÐµÑ€ÑÐ¸Ð¸ (27 Ñ„Ð°Ð¹Ð»Ð¾Ð²)
â”‚   â”‚   â””â”€â”€ [27 Ñ€Ð¾Ð»ÐµÐ¹].png       # PNG Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»Ñ‹
â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”œâ”€â”€ gamemaster.md
â”‚   â”‚   â””â”€â”€ players.md
â”‚   â”œâ”€â”€ sounds/                  # Ð—Ð²ÑƒÐºÐ¾Ð²Ñ‹Ðµ ÑÑ„Ñ„ÐµÐºÑ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ day.mp3
â”‚   â”‚   â”œâ”€â”€ night.mp3
â”‚   â”‚   â”œâ”€â”€ game-start.mp3
â”‚   â”‚   â”œâ”€â”€ voting.mp3
â”‚   â”‚   â”œâ”€â”€ message.mp3
â”‚   â”‚   â”œâ”€â”€ whisper.mp3
â”‚   â”‚   â”œâ”€â”€ notification.mp3
â”‚   â”‚   â””â”€â”€ phase-change.mp3
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ robots.txt
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ rolesRegistry.js         # ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ€Ð¾Ð»ÐµÐ¹ (Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ)
â”œâ”€â”€ nuxt.config.ts
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ development_guideline.md
â”œâ”€â”€ game_technical_spec.md
â”œâ”€â”€ Rules.md
â””â”€â”€ README.md
```

### ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

**Ð¡ÐµÑ€Ð²ÐµÑ€Ð½Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ:**
- `server/socket-server.js` - Ð“Ð»Ð°Ð²Ð½Ñ‹Ð¹ ÑÐ¾ÐºÐµÑ‚ ÑÐµÑ€Ð²ÐµÑ€
- `server/models/GameRoom.js` - ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹
- `server/services/ChatCommandProcessor.js` - ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ¾Ð¼Ð°Ð½Ð´ Ñ‡Ð°Ñ‚Ð°
- `shared/rolesRegistry.js` - ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ñ€Ð¾Ð»ÐµÐ¹

**ÐšÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ°Ñ Ñ‡Ð°ÑÑ‚ÑŒ:**
- `app/composables/useGame.js` - ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¸Ð³Ñ€Ð¾Ð²Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°
- `app/composables/useSocket.js` - Socket.IO ÐºÐ»Ð¸ÐµÐ½Ñ‚
- `app/components/GameChat.vue` - ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ Ñ‡Ð°Ñ‚Ð°

### WebSocket Events

**ÐšÐ»Ð¸ÐµÐ½Ñ‚ â†’ Ð¡ÐµÑ€Ð²ÐµÑ€:**
- `create-room`, `join-room`, `start-game`
- `send-message`, `vote-player`
- `voice-activity`, `admin-action`

**Ð¡ÐµÑ€Ð²ÐµÑ€ â†’ ÐšÐ»Ð¸ÐµÐ½Ñ‚:**
- `room-created`, `join-success`, `game-updated`
- `new-message`, `new-whisper`
- `phase-changed`, `voting-ended`

### Ð˜Ð³Ñ€Ð¾Ð²Ñ‹Ðµ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ
1. `setup` - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¸Ð³Ñ€Ñ‹ (Ð²Ñ‹Ð±Ð¾Ñ€ Ñ€Ð¾Ð»ÐµÐ¹)
2. `introduction` - Ð¤Ð°Ð·Ð° Ð·Ð½Ð°ÐºÐ¾Ð¼ÑÑ‚Ð²Ð°
3. `night` - ÐÐ¾Ñ‡Ð½Ð°Ñ Ñ„Ð°Ð·Ð°
4. `day` - Ð”Ð½ÐµÐ²Ð½Ð°Ñ Ñ„Ð°Ð·Ð° (Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ðµ)
5. `voting` - Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ð½Ð¸Ðµ
6. `ended` - Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ Ð¸Ð³Ñ€Ñ‹

## Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ñ€Ð¾Ð»ÐµÐ¹

### Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ñ€Ð¾Ð»Ð¸:
```javascript
{
  name: 'ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÐ¼Ð¾Ðµ Ð¸Ð¼Ñ',
  description: 'ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÐµÐ¹',
  color: 'blue|red|brown|purple|gold',
  hasNightAction: boolean,
  team: 'village|werewolf|tanner|special|neutral',
  implemented: boolean,
  phaseHints: {
    day: 'Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð´Ð½Ñ‘Ð¼',
    night: 'Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð½Ð¾Ñ‡ÑŒÑŽ'
  }
}
```

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ€Ð¾Ð»ÐµÐ¹:
- **village** - ÐœÐ¸Ñ€Ð½Ñ‹Ðµ Ð¶Ð¸Ñ‚ÐµÐ»Ð¸
- **werewolf** - ÐžÐ±Ð¾Ñ€Ð¾Ñ‚Ð½Ð¸
- **tanner** - ÐÐµÑƒÐ´Ð°Ñ‡Ð½Ð¸Ðº
- **special** - ÐžÑÐ¾Ð±Ñ‹Ðµ Ñ€Ð¾Ð»Ð¸
- **neutral** - Ð’ÐµÐ´ÑƒÑ‰Ð¸Ð¹

## Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ñ‡Ð°Ñ‚Ð°

### ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹:
- `/w [Ð¸Ð³Ñ€Ð¾Ðº] [ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ]` - Ð¨ÐµÐ¿Ð¾Ñ‚ Ð¸Ð³Ñ€Ð¾ÐºÑƒ
- `/whisper [Ð¸Ð³Ñ€Ð¾Ðº] [ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ]` - Ð¨ÐµÐ¿Ð¾Ñ‚ Ð¸Ð³Ñ€Ð¾ÐºÑƒ
- `/Ñˆ [Ð¸Ð³Ñ€Ð¾Ðº] [ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ]` - Ð¨ÐµÐ¿Ð¾Ñ‚ Ð½Ð° Ñ€ÑƒÑÑÐºÐ¾Ð¼
- `/wg [Ð³Ñ€ÑƒÐ¿Ð¿Ð°] [ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ]` - Ð“Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ð¾Ð¹ ÑˆÐµÐ¿Ð¾Ñ‚
- `/help` - Ð¡Ð¿Ñ€Ð°Ð²ÐºÐ° Ð¿Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼

### Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹ Ð´Ð»Ñ ÑˆÐµÐ¿Ð¾Ñ‚Ð°:
- **Ð¾Ð±Ð¾Ñ€Ð¾Ñ‚Ð½Ð¸/Ð²Ð¾Ð»ÐºÐ¸/wolves** - ÐžÐ±Ð¾Ñ€Ð¾Ñ‚Ð½Ð¸
- **Ð´ÐµÑ€ÐµÐ²Ð½Ñ/Ð¶Ð¸Ñ‚ÐµÐ»Ð¸/village** - Ð–Ð¸Ñ‚ÐµÐ»Ð¸
- **Ð²ÑÐµ/all** - Ð’ÑÐµ Ð¸Ð³Ñ€Ð¾ÐºÐ¸ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð²ÐµÐ´ÑƒÑ‰Ð¸Ð¹)
- **Ð²ÐµÐ´ÑƒÑ‰Ð¸Ð¹/host** - Ð’ÐµÐ´ÑƒÑ‰ÐµÐ¼Ñƒ

## ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

### Environment Variables
- `NODE_ENV=production`
- `SOCKET_PORT=3001`

### Production Settings
- Development: `localhost:3000`
- Production: `mafia.waifucards.app`

## Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

- Rate Limiting: 20 ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹/Ð¼Ð¸Ð½ÑƒÑ‚Ñƒ
- Throttling Ð³Ð¾Ð»Ð¾ÑÐ¾Ð²Ð¾Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸ (150ms)
- ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ 3 ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ñ‹ Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ IP
- Ð¡Ð°Ð½Ð¸Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð°Ð² Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°

## Ð—Ð²ÑƒÐºÐ¾Ð²Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°

### Ð¤Ð°Ð¹Ð»Ñ‹ (`public/sounds/`):
- `day.mp3`, `night.mp3` - Ð¡Ð¼ÐµÐ½Ð° Ñ„Ð°Ð·
- `game-start.mp3`, `voting.mp3` - Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¸Ð³Ñ€Ñ‹
- `message.mp3`, `whisper.mp3` - Ð§Ð°Ñ‚
- `notification.mp3`, `phase-change.mp3` - Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ

## Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ð°Ñ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ

- WebRTC Ð°Ð½Ð°Ð»Ð¸Ð· Ð¼Ð¸ÐºÑ€Ð¾Ñ„Ð¾Ð½Ð°
- Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð³Ð¾Ð²Ð¾Ñ€ÑÑ‰Ð¸Ñ… Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
- Throttling Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ Ñ„Ð°Ð·

## ÐŸÐ°Ñ‚Ñ‚ÐµÑ€Ð½Ñ‹ ÐºÐ¾Ð´Ð°

### Composables:
- Singleton Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½ Ð´Ð»Ñ Ð³Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ
- Reactive Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹
- Computed properties
- Ð–Ð¸Ð·Ð½ÐµÐ½Ð½Ñ‹Ð¹ Ñ†Ð¸ÐºÐ» listeners

### Ð¡ÐµÑ€Ð²ÐµÑ€Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ°:
- Event-driven Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°
- Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð½Ð° ÐºÐ°Ð¶Ð´Ð¾Ð¼ ÑˆÐ°Ð³Ðµ
- Error handling
- Memory leak prevention

## Debug Ð¸ Troubleshooting

### Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:
1. **Socket.IO Ð½Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ** - Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚ 3001 Ð¸ CORS
2. **Ð Ð¾Ð»Ð¸ Ð½Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ** - Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ `shared/rolesRegistry.js`
3. **ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ‡Ð°Ñ‚Ð° Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚** - Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ChatCommandProcessor
4. **ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹ Ð½Ðµ Ñ€ÐµÐ½Ð´ÐµÑ€ÑÑ‚ÑÑ** - Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ñ‹

### Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:
- Ð¡ÐµÑ€Ð²ÐµÑ€: Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÑ‹ `ðŸŽ®`, `ðŸ’¬`, `ðŸ—³ï¸`
- ÐšÐ»Ð¸ÐµÐ½Ñ‚: Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÑ‹ `ðŸ”Œ`, `ðŸ”„`, `ðŸ’¬`

## Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

- Node.js >= 18.0.0
- Socket.IO 4.8.1
- Nuxt 4.0.1
- Vue 3.5.18

# important-instruction-reminders
Do what has been asked; nothing more, nothing less.
NEVER create files unless they're absolutely necessary for achieving your goal.
ALWAYS prefer editing an existing file to creating a new one.
NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.