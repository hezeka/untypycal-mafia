# –ì–∞–π–¥–ª–∞–π–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: "–ù–µ—Ç–∏–ø–∏—á–Ω–∞—è –ú–∞—Ñ–∏—è"
## –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –ª—é–±–æ–π –ò–ò –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- **KISS** - –ø—Ä–æ—Å—Ç–æ—Ç–∞ –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ, –Ω–∏–∫–∞–∫–æ–≥–æ over-engineering
- **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ—Å—Ç—å** - –Ω–µ–±–æ–ª—å—à–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏, –Ω–µ –±–æ–ª—å—à–∏–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –Ω–æ–≤–æ–µ –Ω–µ –ª–æ–º–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º** - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## üéÆ –ß—Ç–æ —ç—Ç–æ –∑–∞ –∏–≥—Ä–∞

### –ë–∞–∑–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞
**–¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –¥–µ–¥—É–∫—Ü–∏—è**: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ ‚Üí –ù–æ—á—å ‚Üí –î–µ–Ω—å ‚Üí –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ ‚Üí (–ø–æ–≤—Ç–æ—Ä –¥–æ –ø–æ–±–µ–¥—ã)

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **ONUW —Ä–æ–ª–∏** —Å –Ω–æ—á–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ
- **–¶–∏–∫–ª—ã** –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π –ø–æ–±–µ–¥—ã (–Ω–µ one-night)
- **–û–±–æ—Ä–æ—Ç–Ω–∏ –≤–∏–¥—è—Ç –Ω–æ—á–Ω–æ–π —á–∞—Ç**, –æ—Å—Ç–∞–ª—å–Ω—ã–µ - –Ω–µ—Ç
- **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ** –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏
- **–î–≤–∞ —Ç–∏–ø–∞ –≤–µ–¥—É—â–∏—Ö** (–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å/–∏–≥—Ä–æ–∫)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç–µ–∫
- **Frontend**: Nuxt 4 + Vue 3 + JavaScript (–ù–ï TypeScript)
- **Backend**: Node.js + Express + Socket.IO
- **–ü–∞—Ç—Ç–µ—Ä–Ω**: Event-Driven Architecture

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
server/
‚îú‚îÄ‚îÄ engine/GameEngine.js      # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫
‚îú‚îÄ‚îÄ roles/[team]/[Role].js    # –ö–ª–∞—Å—Å—ã —Ä–æ–ª–µ–π  
‚îú‚îÄ‚îÄ handlers/                 # Socket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îî‚îÄ‚îÄ utils/constants.js        # –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

app/
‚îú‚îÄ‚îÄ components/game/          # –ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ composables/              # Vue Composition API
‚îî‚îÄ‚îÄ pages/                    # –°—Ç—Ä–∞–Ω–∏—Ü—ã
```

---

## üé≠ –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (ONUW –ø–æ—Ä—è–¥–æ–∫)

### –ñ–∏—Ç–µ–ª–∏ (—Å–∏–Ω–∏–µ)
- **–ñ–∏—Ç–µ–ª—å** - –ù–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
- **–ü—Ä–æ–≤–∏–¥–µ—Ü** (6) - –ù–æ—á—å—é: —Ä–æ–ª—å –∏–≥—Ä–æ–∫–∞ –ò–õ–ò 2 —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã  
- **–ì—Ä–∞–±–∏—Ç–µ–ª—å** (7) - –ù–æ—á—å—é: –º–µ–Ω—è–µ—Ç—Å—è —Ä–æ–ª—è–º–∏ + —É–∑–Ω–∞–µ—Ç –Ω–æ–≤—É—é
- **–°–º—É—Ç—å—è–Ω** (8) - –ù–æ—á—å—é: –º–µ–Ω—è–µ—Ç —Ä–æ–ª–∏ 2 –∏–≥—Ä–æ–∫–æ–≤ –º–µ—Å—Ç–∞–º–∏
- **–ü—å—è–Ω–∏—Ü–∞** (9) - –ù–æ—á—å—é: –º–µ–Ω—è–µ—Ç —Ä–æ–ª—å —Å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π (–Ω–µ —É–∑–Ω–∞–µ—Ç)
- **–°—Ç—Ä–∞–∂** (19) - –ù–æ—á—å—é: —â–∏—Ç –Ω–∞ –∏–≥—Ä–æ–∫–∞

### –û–±–æ—Ä–æ—Ç–Ω–∏ (–∫—Ä–∞—Å–Ω—ã–µ)
- **–û–±–æ—Ä–æ—Ç–µ–Ω—å** (3) - –ù–æ—á—å—é: –Ω–∞—Ö–æ–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ + –≥–æ–ª–æ—Å—É—é—Ç –∑–∞ —É–±–∏–π—Å—Ç–≤–æ
- **–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ª–∫** (11) - –ù–æ—á—å—é: –Ω–∞—Ö–æ–¥–∏—Ç –æ–±–æ—Ä–æ—Ç–Ω–µ–π ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç (–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –ò–õ–ò –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ä—Ç—É)
- **–ú–∏–Ω—å–æ–Ω** (4) - –ù–æ—á—å—é: —É–∑–Ω–∞–µ—Ç –æ–±–æ—Ä–æ—Ç–Ω–µ–π (–æ–Ω–∏ –µ–≥–æ –ù–ï –∑–Ω–∞—é—Ç), –ù–ï –≤–∏–¥–∏—Ç –Ω–æ—á–Ω–æ–π —á–∞—Ç
- **–í–æ–ª–∫-—Å–Ω–æ–≤–∏–¥–µ—Ü** (18) - –û–±–æ—Ä–æ—Ç–Ω–∏ –∑–Ω–∞—é—Ç –µ–≥–æ, –æ–Ω –∏—Ö –ù–ï –∑–Ω–∞–µ—Ç, –ù–ï –≤–∏–¥–∏—Ç –Ω–æ—á–Ω–æ–π —á–∞—Ç

### –û—Å–æ–±—ã–µ
- **–ù–µ—É–¥–∞—á–Ω–∏–∫** (–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π) - –ü–æ–±–µ–∂–¥–∞–µ—Ç –µ—Å–ª–∏ —É–±–∏—Ç
- **–î–æ–ø–ø–µ–ª—å–≥–∞–Ω–≥–µ—Ä** (2) - –ö–æ–ø–∏—Ä—É–µ—Ç —Ä–æ–ª—å + –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–µ –¥–µ–π—Å—Ç–≤–∏–µ

### –ü–æ—Ä—è–¥–æ–∫ –Ω–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
2‚Üí3‚Üí4‚Üí6‚Üí7‚Üí8‚Üí9‚Üí11‚Üí18‚Üí19 (–ø–æ –Ω–æ–º–µ—Ä–∞–º –≤—ã—à–µ)

---

## üíª –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∞

### JavaScript Style
```javascript
// ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –∫–ª–∞—Å—Å—ã
class GameEngine {
  constructor(room) {
    this.room = room
    this.state = 'setup'
  }
  
  nextPhase() {
    // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
  }
}

// ‚ùå –ò–∑–±–µ–≥–∞—Ç—å over-engineering
class GameEngineFactory {
  createEngine(type) {
    return new (this.getEngineClass(type))()
  }
}
```

### –ö–æ–º–ø–æ–∑–∏—Ü–∏—è vs –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
- **–ú–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è** –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å –∫–æ–º–ø–æ–∑–∏—Ü–∏—é**
- **–Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
```javascript
// server/utils/constants.js
export const PHASE_DURATIONS = {
  INTRODUCTION: 180, // 3 –º–∏–Ω
  NIGHT: 30,         // 30 —Å–µ–∫ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏–µ
  DAY: 300,          // 5 –º–∏–Ω
  VOTING: 120        // 2 –º–∏–Ω
}
```

---

## üîÑ –§–∞–∑—ã –∏–≥—Ä—ã (–¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

### –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è)
- **–í—Ä–µ–º—è**: 180 —Å–µ–∫
- **–ß–∞—Ç**: –í—Å–µ –≤–∏–¥—è—Ç –≤—Å–µ
- **–î–µ–π—Å—Ç–≤–∏—è**: –°–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ

### –ù–æ—á—å (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è) 
- **–ü–æ—Ä—è–¥–æ–∫**: –°—Ç—Ä–æ–≥–æ –ø–æ ONUW (—Å–º. –≤—ã—à–µ)
- **–í—Ä–µ–º—è**: 30 —Å–µ–∫ –Ω–∞ –∫–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
- **–ß–∞—Ç**: –¢–æ–ª—å–∫–æ –æ–±–æ—Ä–æ—Ç–Ω–∏ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- **–ü—Ä–æ–ø—É—Å–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–ª

### –î–µ–Ω—å (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è)
- **–í—Ä–µ–º—è**: 300 —Å–µ–∫  
- **–ù–∞—á–∞–ª–æ**: –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–æ—á–∏
- **–ß–∞—Ç**: –í—Å–µ –∂–∏–≤—ã–µ –≤–∏–¥—è—Ç –≤—Å–µ

### –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è)
- **–ß–∞—Ç**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω (–∫—Ä–æ–º–µ —à–µ–ø–æ—Ç–∞ –≤–µ–¥—É—â–µ–º—É)
- **–ú–µ—Ö–∞–Ω–∏–∫–∞**: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ
- **game_master**: –ù–ï —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏

---

## üí¨ –°–∏—Å—Ç–µ–º–∞ —á–∞—Ç–∞

### –ü—Ä–∞–≤–∞ –ø–æ —Ñ–∞–∑–∞–º
```javascript
// –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ & –î–µ–Ω—å
chatPermissions: {
  canChat: true,
  canSeeAll: true,
  canWhisper: true
}

// –ù–æ—á—å  
chatPermissions: {
  canChat: false,
  canSeeAll: false,
  werewolfChat: true // –¢–æ–ª—å–∫–æ –æ–±–æ—Ä–æ—Ç–Ω–∏
}

// –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
chatPermissions: {
  canChat: false,
  canWhisper: true // –¢–æ–ª—å–∫–æ –≤–µ–¥—É—â–µ–º—É
}
```

### –ö–æ–º–∞–Ω–¥—ã
- `/—à [–∏–≥—Ä–æ–∫] [—Ç–µ–∫—Å—Ç]` - –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `/—à –≤–µ–¥—É—â–∏–π [—Ç–µ–∫—Å—Ç]` - —à–µ–ø–æ—Ç –≤–µ–¥—É—â–µ–º—É (–≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω)
- `/help` - —Å–ø—Ä–∞–≤–∫–∞

---

## üîå –°–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü—Ä–∏–Ω—Ü–∏–ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–∫–µ—Ç–æ–≤
- **–°–æ–∫–µ—Ç—ã** - —Ç–æ–ª—å–∫–æ –¥–ª—è real-time —Å–æ–±—ã—Ç–∏–π (—á–∞—Ç, —Å–º–µ–Ω–∞ —Ñ–∞–∑, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)
- **HTTP –∑–∞–ø—Ä–æ—Å—ã** - –¥–ª—è —Ä–∞–∑–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ)
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π, throttling, –º–∏–Ω–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö

### WebSocket —Å–æ–±—ã—Ç–∏—è (—Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ (–∫–ª–∏–µ–Ω—Ç ‚Üí —Å–µ—Ä–≤–µ—Ä)
'game:chat-message'     // –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
'game:night-action'     // –ù–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
'game:voice-activity'   // –ì–æ–ª–æ—Å–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
'room:leave'            // –ü–æ–∫–∏–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã

// –ü–æ–ª—É—á–µ–Ω–∏–µ (—Å–µ—Ä–≤–µ—Ä ‚Üí –∫–ª–∏–µ–Ω—Ç)  
'game:phase-changed'    // –°–º–µ–Ω–∞ —Ñ–∞–∑
'game:state-update'     // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä—ã
'chat:new-message'      // –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
'player:disconnected'   // –û—Ç–∫–ª—é—á–µ–Ω–∏—è
```

### HTTP API (–¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ)
```javascript
POST /api/rooms          // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
POST /api/rooms/:id/join // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
POST /api/games/:id/vote // –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
GET  /api/rooms/public   // –°–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ (public/)

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```
public/
‚îú‚îÄ‚îÄ favicon.ico
‚îú‚îÄ‚îÄ robots.txt
‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îî‚îÄ‚îÄ claws.png              # –ò–∫–æ–Ω–∫–∞ –∫–æ–≥—Ç–µ–π –æ–±–æ—Ä–æ—Ç–Ω–µ–π
‚îú‚îÄ‚îÄ roles/
‚îÇ   ‚îú‚îÄ‚îÄ [27 —Ä–æ–ª–µ–π].png         # –ë–æ–ª—å—à–∏–µ PNG
‚îÇ   ‚îî‚îÄ‚îÄ compressed/
‚îÇ       ‚îî‚îÄ‚îÄ [27 —Ä–æ–ª–µ–π].webp    # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ WebP
‚îú‚îÄ‚îÄ rules/
‚îÇ   ‚îú‚îÄ‚îÄ gamemaster.md          # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ  
‚îÇ   ‚îî‚îÄ‚îÄ players.md             # –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤
‚îî‚îÄ‚îÄ sounds/
    ‚îú‚îÄ‚îÄ day.mp3, night.mp3     # –°–º–µ–Ω–∞ —Ñ–∞–∑
    ‚îú‚îÄ‚îÄ game-start.mp3         # –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
    ‚îú‚îÄ‚îÄ phase-change.mp3       # –û–±—â–∞—è —Å–º–µ–Ω–∞ —Ñ–∞–∑—ã
    ‚îú‚îÄ‚îÄ voting.mp3             # –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ message.mp3            # –°–æ–æ–±—â–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ whisper.mp3            # –®–µ–ø–æ—Ç
    ‚îî‚îÄ‚îÄ notification.mp3       # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
```javascript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º WebP –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
const roleImage = `/roles/compressed/${roleId}.webp`
const fallbackImage = `/roles/${roleId}.png`

// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤
const sounds = {
  day: new Audio('/sounds/day.mp3'),
  night: new Audio('/sounds/night.mp3'),
  message: new Audio('/sounds/message.mp3')
}
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–æ–¥–µ —Å–µ—Ä–≤–µ—Ä–∞
```javascript
const AUTH_MODE = process.env.AUTH_MODE || 'nickname' // 'telegram' –∏–ª–∏ 'nickname'

if (AUTH_MODE === 'telegram') {
  // Telegram WebApp –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
} else {
  // localStorage –Ω–∏–∫–Ω–µ–π–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
}
```

### –õ–æ–≥–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
1. **–ù–µ—Ç –Ω–∏–∫–Ω–µ–π–º–∞** ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
2. **–ï—Å—Ç—å –Ω–∏–∫–Ω–µ–π–º + —Å–≤–æ–±–æ–¥–µ–Ω** ‚Üí –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è
3. **–ù–∏–∫–Ω–µ–π–º –∑–∞–Ω—è—Ç –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º** ‚Üí –∑–∞–Ω–∏–º–∞–µ–º –µ–≥–æ —Å–ª–æ—Ç  
4. **–ò–≥—Ä–∞ –∏–¥–µ—Ç + –Ω–æ–≤—ã–π –∏–≥—Ä–æ–∫** ‚Üí —Å–ø–µ–∫—Ç–∞—Ç–æ—Ä –ø–æ –∑–∞–ø—Ä–æ—Å—É

---

## üèó –¢–∏–ø—ã –∫–æ–º–Ω–∞—Ç

### –í–µ–¥—É—â–∏–π-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å (game_master)
- **–í–∏–¥–∏—Ç**: –í—Å–µ —Ä–æ–ª–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è
- **–ú–æ–∂–µ—Ç**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ñ–∞–∑—ã, –≤—ã–≥–æ–Ω—è—Ç—å, —á–∏—Ç–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–ù–ï –º–æ–∂–µ—Ç**: –ë—ã—Ç—å —É–±–∏—Ç—ã–º, —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏
- **–ù–ï –≤ —Å–ø–∏—Å–∫–µ**: –î–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### –í–µ–¥—É—â–∏–π-–∏–≥—Ä–æ–∫  
- **–ú–æ–∂–µ—Ç**: –£–ø—Ä–∞–≤–ª—è—Ç—å –∏–≥—Ä–æ–π
- **–£—á–∞—Å—Ç–≤—É–µ—Ç**: –ö–∞–∫ –æ–±—ã—á–Ω—ã–π –∏–≥—Ä–æ–∫ (—Ä–æ–ª—å, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ, —É–±–∏–π—Å—Ç–≤–æ)
- **–ù–ï –≤–∏–¥–∏—Ç**: –†–æ–ª–∏ –¥—Ä—É–≥–∏—Ö, –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üé≤ –£—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã (—Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏)

1. **–ù–µ—É–¥–∞—á–Ω–∏–∫ —É–±–∏—Ç** ‚Üí –ü–æ–±–µ–¥–∞ –Ω–µ—É–¥–∞—á–Ω–∏–∫–∞ (–≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç)
2. **–•–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ–±–æ—Ä–æ—Ç–µ–Ω—å —É–±–∏—Ç** (–∫—Ä–æ–º–µ –º–∏–Ω—å–æ–Ω–∞) ‚Üí –ü–æ–±–µ–¥–∞ –∂–∏—Ç–µ–ª–µ–π  
3. **–í—Å–µ –∂–∏—Ç–µ–ª–∏ —É–±–∏—Ç—ã** ‚Üí –ü–æ–±–µ–¥–∞ –æ–±–æ—Ä–æ—Ç–Ω–µ–π

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ú–∏–Ω—å–æ–Ω**: –ü–æ–±–µ–∂–¥–∞–µ—Ç —Å –æ–±–æ—Ä–æ—Ç–Ω—è–º–∏ –¥–∞–∂–µ –µ—Å–ª–∏ —É–±–∏—Ç
- **–ï—Å–ª–∏ –º–∏–Ω—å–æ–Ω–∞ —É–±–∏–ª–∏** ‚Üí –æ–±–æ—Ä–æ—Ç–Ω–∏ –ù–ï –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—é—Ç

---

## üõ† –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
```javascript
// Feature flags –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
if (FEATURES.NEW_GAME_ENGINE) {
  // –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
} else {
  // –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ (fallback)
}
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü–µ—Ä–µ–¥ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º** - —Ç–µ—Å—Ç–∏—Ä—É–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
- **–ö–∞–∂–¥—É—é —Ä–æ–ª—å** - unit —Ç–µ—Å—Ç—ã  
- **–ò–≥—Ä–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** - integration —Ç–µ—Å—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–§—É–Ω–∫—Ü–∏–∏** < 50 —Å—Ç—Ä–æ–∫
- **–ö–ª–∞—Å—Å—ã** < 200 —Å—Ç—Ä–æ–∫
- **Complexity** < 10

---

## üì± UI –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
**–®–∞–ø–∫–∞**: `[–õ–æ–≥–æ—Ç–∏–ø "–ù–µ—Ç–∏–ø–∏—á–∫–∞" | –ù–∞–≤–∏–≥–∞—Ü–∏—è (–†–æ–ª–∏, –ü—Ä–∞–≤–∏–ª–∞) | –ü–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]`
**–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç**:
- –ë–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã
- –ë–ª–æ–∫ —Å–ø–∏—Å–∫–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç + –ø–æ–∏—Å–∫ –ø–æ ID –∫–æ–º–Ω–∞—Ç—ã
**–ü–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º**: –ë–ª–æ–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–≥—Ä–µ

### –ò–≥—Ä–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (GRID —Å–µ—Ç–∫–∞)
**–®–∞–ø–∫–∞**: `[–õ–æ–≥–æ—Ç–∏–ø "–ù–µ—Ç–∏–ø–∏—á–∫–∞" | –ù–∞–≤–∏–≥–∞—Ü–∏—è (–†–æ–ª–∏, –ü—Ä–∞–≤–∏–ª–∞) | –ü–∞–Ω–µ–ª—å –∏–≥—Ä—ã*]`
*–ü–∞–Ω–µ–ª—å –∏–≥—Ä—ã: `[–ú—å—é—Ç –∑–≤—É–∫–∞ | –ú—å—é—Ç –º–∏–∫—Ä–æ | —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å | —Å—Ç–∞—Ç—É—Å + –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã | –ü–æ–∫–∏–Ω—É—Ç—å]`

**–û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å** (–ª–µ–≤–∞—è —á–∞—Å—Ç—å):
```
[–§–∞–∑–∞ –∏–≥—Ä—ã + —Ç–∞–π–º–µ—Ä —Å–º–µ–Ω—ã | –®–ø–∞—Ä–≥–∞–ª–∫–∞]
[–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å) | ]  
[–°–µ—Ç–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ 2x3 –∏–ª–∏ 3x2     | ]
[–ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑–µ      | ]
```

**–ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å** (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è):
```
[        –ò–≥—Ä–æ–≤–æ–π —á–∞—Ç        ]
```

### –°–µ—Ç–∫–∞ –∏–≥—Ä–æ–∫–æ–≤  
- **GRID —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **–ö–∞—Ä—Ç–æ—á–∫–∏ –∏–≥—Ä–æ–∫–æ–≤**: 
  - **–û–±—ã—á–Ω—ã–µ**: –ê–≤–∞—Ç–∞—Ä + –Ω–∏–∫ + —Å—Ç–∞—Ç—É—Å—ã + –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  - **–†–æ–ª–∏ —Ä–∞—Å–∫—Ä—ã—Ç—ã**: –ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ä–æ–ª–∏ –≤–º–µ—Å—Ç–æ –∞–≤–∞—Ç–∞—Ä–∞ + –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–¥ –Ω–∏–∫–æ–º
  - **–û–±–æ—Ä–æ—Ç–Ω–∏**: –ö—Ä–∞—Å–Ω–∞—è —Ä–æ–ª—å + –∏–∫–æ–Ω–∫–∞ –∫–æ–≥—Ç–µ–π —Å–ø—Ä–∞–≤–∞

### –ö–Ω–æ–ø–∫–∏ –ø–æ–¥ –∫–∞–∂–¥—ã–º –∏–≥—Ä–æ–∫–æ–º
**–í–µ–¥—É—â–∏–π (game_master)**:
`[–õ–° | –ó–∞—â–∏—Ç–∏—Ç—å | –£–±–∏—Ç—å/–í–æ—Å–∫—Ä–µ—Å–∏—Ç—å | –í—ã–≥–Ω–∞—Ç—å]`

**–û–±—ã—á–Ω—ã–π –∏–≥—Ä–æ–∫**:
`[–õ–° | –ø—É—Å—Ç–æ]`

**–û–±–æ—Ä–æ—Ç–µ–Ω—å**:
`[–õ–° | ‚ò†Ô∏è –≥–æ–ª–æ—Å –∑–∞ —É–±–∏–π—Å—Ç–≤–æ | üëÅÔ∏è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–æ–ª—å]` (–µ—Å–ª–∏ –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å)

**–°–≤–æ—è –∫–∞—Ä—Ç–æ—á–∫–∞**:
`[–û –≤–∞—à–µ–π —Ä–æ–ª–∏]` - –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
- **–ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ** - –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ª–∫)
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç** - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∞–∑—ã –∏–≥—Ä—ã –∏ —Ä–æ–ª–∏

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
```
[–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å | –†–æ–ª—å/–¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è]
–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
                         –≤—Ä–µ–º—è
```
- **–õ–∏—á–Ω—ã–µ (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ñ–æ–Ω)**: `–ò–≥—Ä–æ–∫1 > –ò–≥—Ä–æ–∫2 | —Ä–æ–ª—å_–µ—Å–ª–∏_–≤–∏–¥–Ω–∞`
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ (–∑–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω)**: `–°–∏—Å—Ç–µ–º–∞ | –û–ø–æ–≤–µ—â–µ–Ω–∏–µ`

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ò–ò

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ä–æ–ª—å
1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –≤ `server/roles/[team]/[Name].js`
2. –£–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç `BaseRole`
3. –î–æ–±–∞–≤–∏—Ç—å –≤ `server/roles/rolesList.js`
4. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `server/config/roles.js`

### –ò–∑–º–µ–Ω–∏—Ç—å –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É  
1. –ù–∞–π—Ç–∏ –≤ `server/engine/GameEngine.js`
2. –°–æ–∑–¥–∞—Ç—å Feature Flag –µ—Å–ª–∏ breaking change
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∞–∑—É
1. –î–æ–±–∞–≤–∏—Ç—å –≤ `GAME_PHASES` –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
2. –û–±–Ω–æ–≤–∏—Ç—å `PhaseManager.js`  
3. –°–æ–∑–¥–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
4. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Socket.IO

---

## üö´ –ß–¢–û –ù–ï –î–ï–õ–ê–¢–¨

- ‚ùå **Over-engineering** - —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
- ‚ùå **TypeScript** - –ø—Ä–æ–µ–∫—Ç –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript
- ‚ùå **–ì–ª—É–±–æ–∫–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ** - –º–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è
- ‚ùå **–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞** - –≤—Å–µ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚ùå **–ë–æ–ª—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –¥—Ä–æ–±–∏—Ç—å –Ω–∞ –º–µ–ª–∫–∏–µ
- ‚ùå **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚ùå **–≠–º–æ–¥–∑–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ** - –º–∏–Ω–∏–º—É–º –¥–µ–∫–æ—Ä–∞—Ü–∏–π

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- [ ] ESLint –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç  
- [ ] Feature flag –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- [ ] –§—É–Ω–∫—Ü–∏–∏ < 50 —Å—Ç—Ä–æ–∫
- [ ] –ù–µ—Ç console.error –≤ production

### –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
- [ ] –ò–≥—Ä–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Performance –Ω–µ —É—Ö—É–¥—à–∏–ª—Å—è
- [ ] –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –≥–æ—Ç–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev              # –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
npm run test             # –¢–µ—Å—Ç—ã
npm run lint             # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

# Feature flags
USE_NEW_ENGINE=true npm run dev
ENABLE_TELEGRAM=true npm run dev
```

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ**: –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è - –¥–µ–ª–∞–π –ø—Ä–æ—â–µ. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–Ω—è—Ç–µ–Ω –ª—é–±–æ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∑–∞ 5 –º–∏–Ω—É—Ç.